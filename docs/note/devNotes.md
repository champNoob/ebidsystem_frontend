# 开发笔记

## 业务

### 初始路由定向

未登录访问时，默认重定向到 `/login`，而不是 `/register`

绝大多数系统假设：访问系统的人，更可能是已有账号的用户

策略：

| 场景         | 行为              |
| ------------ | ---------------- |
| 未登录访问任何业务路由  | 重定向 `/login`   |
| `/login` 页面     | 提供「去注册」入口   |
| `/register` 页面  | 提供「已有账号？去登录」 |
| 注册成功          | 自动跳转 `/login`（或自动登录） |

### 选择“筛选订单列表”功能的执行组件

`Orders` 页需要区分和当前和历史订单

#### a. 不用“隐藏历史订单”按钮

##### 1.业务逻辑不严谨

“隐藏历史订单”本质是一个 bool 开关，一旦未来要支持：

- 按时间区间
- 按订单状态
- 按交易对
- 按买卖方向

则无法自然演进这个按钮，最终一定会被重构成筛选器，浪费时间。

##### 2.业务语义不严谨（金融系统是忌讳的）：

在证券 / 交易系统中，“当前订单（Open Orders）”和“历史订单（Order History）”不是 UI 状态，而是 订单状态集合的投影

例如：
| 分类   | 实际含义                         |
| ---- | ---------------------------- |
| 当前订单 | NEW / PARTIALLY_FILLED       |
| 历史订单 | FILLED / CANCELED / REJECTED |

用“隐藏”这种词，会模糊真实业务含义

##### 3.用户体验（专业用户会不信任）

专业交易系统（Binance / OKX / IB）都有共性：

- 用户明确知道自己在看什么

- 而不是“我是不是点错按钮把数据藏起来了？”

#### b. 不用选择栏

`Tab` 的本质还是硬编码的视图切换，一旦未来加：

- 「失败订单」
- 「已撤销订单」
- 「策略订单」

则 `Tab` 会指数级膨胀

#### c. 应当使用**筛选器**

优点：

- 可刷新
- 可分享
- 可后端直连分页
- 符合 REST 语义

## 设计理念

### 薄前端

所有状态以 **后端为准**，前端只做展示、表单、UI 禁用、错误提示等功能

### 前端约束 + 后端兜底

如 `src\api\user.api.ts`的 `RegisterRequest` 接口，不允许 `admin` / `sales` 角色注册
